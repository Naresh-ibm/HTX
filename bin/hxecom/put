#!/bin/ksh
# @(#)75	1.2  src/htx/usr/lpp/htx/bin/hxecom/put, exer_com, htxubuntu 5/24/04 15:58:09
#  
#########################################################################
#input    ls files | put sys_num_or_filename dir
# if you supply a filename give dir if not in current dir

SYS_NUM=$1
if [[ -f $SYS_NUM ]]     # if its file
then
        IS_FILE="y"
else
        IS_FILE=""
fi

if [[ $2 = "" ]]
then
        DIR="/"
else
        DIR=$2
fi

if [[ $IS_FILE = "" ]]
then
		while read -r file
		do
				if [[ -f $file ]]       # make sure is a file
				then
						echo "remote copy $file to $DIR on ioflab$SYS_NUM"
						rcp -p $file root@ioflab$SYS_NUM:$DIR
				fi
		done

else
        while read -r file
        do
                if [[ -f $file ]]       # make sure is a file
                then
                        # do this for file
                        SYSTEMS=`cat $SYS_NUM`
                        for I in $SYSTEMS
                        do
                            echo "remote copy $file to $DIR on ioflab$I"
                            rcp -p $file root@ioflab$I:$DIR
                        done


                fi
        done

fi

