#!/bin/ksh
# @(#)76	1.2  src/htx/usr/lpp/htx/bin/hxecom/rput, exer_com, htxubuntu 5/24/04 15:58:31
#
#input    ls files | put hostname dir
# if you supply a filename give dir if not in current dir

HOST=$1
if [[ -f $HOST ]]     # if its file
then
    IS_FILE="y"
else
    IS_FILE=""
fi

if [[ $HOST = "" ]]
then
	echo " I need the host name or file!"
	exit 0
fi

if [[ $2 = "" ]]
then
	DIR="/"
else
	DIR=$2
fi

if [[ $IS_FILE = "" ]]
then


while read -r file
do
	if [[ -f $file ]]       # make sure is a file
	then
		echo "remote copy $file to $DIR on $HOST"
		rcp -p $file root@$HOST:$DIR
	fi
done

else

    while read -r file
    do
        if [[ -f $file ]]       # make sure is a file
        then
            # do this for file
            HOSTS=`cat $HOST`
            for I in $HOSTS
            do
                echo "remote copy $file to $DIR on $I"
                rcp -p $file root@$I:$DIR
            done

        fi
    done

fi

